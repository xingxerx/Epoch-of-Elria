#!/bin/bash

echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
echo "â•‘              EPOCH OF ELRIA GAME ENGINE                     â•‘"
echo "â•‘                   Application Launcher                      â•‘"
echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
echo "ğŸŒ Starting Epoch of Elria Game Engine..."

# Build the game engine if it doesn't exist
if [ ! -f "EpochOfElriaEngine" ]; then
    echo "ğŸ”¨ Building game engine..."
    g++ -std=c++17 -O2 standalone_game_engine.cpp -o EpochOfElriaEngine

    if [ $? -ne 0 ]; then
        echo "âŒ Build failed! Trying existing games..."
        if [ -f "standalone_game_engine" ]; then
            echo "ğŸš€ Using existing standalone engine..."
            cp standalone_game_engine EpochOfElriaEngine
        elif [ -f "simple_3d_game" ]; then
            echo "ğŸš€ Using simple 3D game..."
            cp simple_3d_game EpochOfElriaEngine
        else
            echo "âŒ No games available! Please install g++ compiler."
            exit 1
        fi
    else
        echo "âœ… Build successful!"
    fi
fi

echo "ğŸš€ Launching Epoch of Elria Game Engine..."
echo ""

# Try to open in a new terminal window (application-like behavior)
if command -v gnome-terminal >/dev/null 2>&1; then
    echo "ğŸ® Opening in new application window..."
    gnome-terminal --title="ğŸŒ Epoch of Elria Game Engine" --geometry=120x40 -- bash -c "./EpochOfElriaEngine; echo ''; echo 'Press any key to close...'; read -n 1"
elif command -v xterm >/dev/null 2>&1; then
    echo "ğŸ® Opening in new application window..."
    xterm -title "ğŸŒ Epoch of Elria Game Engine" -geometry 120x40 -e bash -c "./EpochOfElriaEngine; echo ''; echo 'Press any key to close...'; read -n 1" &
elif command -v konsole >/dev/null 2>&1; then
    echo "ğŸ® Opening in new application window..."
    konsole --title "ğŸŒ Epoch of Elria Game Engine" -e bash -c "./EpochOfElriaEngine; echo ''; echo 'Press any key to close...'; read -n 1" &
else
    echo "ğŸ® Starting in current terminal..."
    echo "Note: Install gnome-terminal, xterm, or konsole for windowed mode"
    echo ""
    ./EpochOfElriaEngine
fi

echo "âœ¨ Game engine launched!"
echo ""
echo "If a new window opened, check your screen for the game!"
echo "Controls: W/A/S/D - Move Camera | E - Edit Mode | X - Create Platform | Q - Quit"
